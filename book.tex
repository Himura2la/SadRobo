%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SadRobo Comicbook
% Version 0.1 (08/05/16)
%
% This template has been downloaded from:
% https://github.com/Himura2la/SadRobo
%
% Original author:
% SadBobo Team
%
% License:
% SadRobo License (А если серьёзно, какая у нас лицензия?)
% 			     (Кто разбирается в лицензиях? Я~--- нет.)
%           (И кажется у гитхаба есть ограничения с этим.)
%
% Важные замечания:
% Роботу всё ещё грустно.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[17pt]{memoir} % 14, 17, 20
\input{config.tex} % Загружаем файл с настройками


% ------- Костыль для кириллицы в input -------

\makeatletter  
    \let\old@input\input
    \renewcommand\input[1]{
        \expandafter\old@input{"\detokenize{#1}"}
    }
\makeatother


% ------- Считаем оптимальную ширину картинки  -------
% ------- По какой-то причине Gin@nat@width возвращает не то (на Создателе), что нужно. разобраться.

\makeatletter 
\def \maxwidth{
	\ifdim\Gin@nat@width>\linewidth
		\linewidth
	\else
		\Gin@nat@width
	\fi}
\makeatother


% ------- Робо-макросы ------- 

\newcommand\R{\par\noindent---~}  % Маркер робота
\newcommand\X{\par\noindent---~}  % Маркер собеседника

\newenvironment{dialog} % Пространство диалога
{  } % Выполняется в начале
{  } % Выполняется в конце

\newenvironment{monolog} % Пространство размышлений
{ \begin{quote}\itshape } % Выполняется в начале
{ \end{quote} } % Выполняется в конце

\newcommand{\newdialog}[3]{
	\chapter{Робот, которому грустно, и #1}
		\input{#1}
		\begin{figure}[p!]
			\center{\includegraphics[height = 16cm, width = \linewidth, keepaspectratio]{#1}}
			\center{#2}
			%\label{pic:#1}
		\end{figure}
	\setcounter{dianum}{#3}
}



\begin{document} % --------------------------------

\newdialog{Викинги}{Борода лучше своего отсутствия}{2}
\newdialog{Создатель}{Все мы что-то создаём}{4}
\newdialog{Паук}{Тащемта, например}{14}
\newdialog{Ницше}{Сверхчеловек не нашего времени}{18}

\end{document}