% !TeX root = book.tex

% ------- Пакеты -------

\usepackage{cmap} % Для кодировки PDF
\usepackage[utf8]{inputenc} % Кодировка входа
\usepackage[encoding,filenameencoding=utf8]{grffile} %Нормально читаем кодировку файловой системы
\usepackage[T2A]{fontenc} % Кодировка выхода
\usepackage[russian]{babel} % Локаль
\usepackage{pscyr} % Крутые русские шрифты (http://scon155.phys.msu.su/~swan/cyrtug2000.pdf)
\usepackage[babel=true]{microtype} % Точный подгон текста
\usepackage{graphicx} % Картинки
\usepackage[unicode=true,bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,breaklinks=false,pdfborder={0 0 1},backref=section,colorlinks=false]{hyperref} % Мета-информация для pdf
\usepackage{ifthen} %Немного логики


% ------- Пути к файлам -------

\makeatletter
	\def\input@path{{texts/}}           % К текстовым файлам (для input)
\makeatother

\graphicspath{{pictures/}}              % К картинкам
\DeclareGraphicsExtensions{.png,.jpg}   % Расширения для используемых картинок

% ------- Геометрия -------

\setstocksize{297mm}{210mm} % Размер исходников
\settrimmedsize{200mm}{185mm}{*} % Размер обрезанной страницы 
\settrims{5mm}{2cm} 			 % Размер обреза сверху/изнутри
% Max 10:43 am
% с 3 сторон по 5 мм с крепления 2 см
\setlrmarginsandblock{10mm}{10mm}{*} % Отступ слева/справа
\setulmarginsandblock{10mm}{15mm}{*} % Отступ сверху/снизу
\setheadfoot{0pt}{1.5em} % Высота шапки и подвала
\setheaderspaces{*}{0pt}{*} % Пространство между шапкой и блоком текста
\setmarginnotes{0pt}{0pt}{0pt} % Ликвидация области заметок

%\usepackage{showframe} % Любые манипуляции с полями проводить с этим пакетом


% ------- Колонтитулы -------

\setlength{\headwidth}{\textwidth} % Ширина шапки, как и у текста
\makeheadrule{plain}{0pt}{0pt} % No header line
\makeoddhead{plain}{
	%\scriptsize{\theauthor\hskip.2cm\vrule\hskip.2cm\itshape{\thetitle}}
}{}{} % Спецификация нечетной шапки (текст)
\makeevenhead{plain}{
	%\scriptsize{\theauthor\hskip.2cm\vrule\hskip.2cm\itshape{\thetitle}}
}{}{} % Спецификация четной шапки (пикча)

\newcommand\zf[1]{\ifnum #1 < 100 0\fi \ifnum #1 < 10 0\fi #1}

\newcounter{dianum}
\setcounter{dianum}{5}
\makeoddfoot{plain}{}{
	{\scriptsize \thepage \quad \vrule \quad \#\zf{\arabic{dianum}}}
}{} % Спецификация нечетного подвала (текст)
\makeevenfoot{plain}{}{

}{} % Спецификация четного подвала (пикча)
\pagestyle{plain}


% ------- Оформление названия главы -------

\makechapterstyle{RoboChapter}{ % Определяем новый стиль
	\renewcommand{\chapterheadstart}{} % Пробел перед началом главы
	\renewcommand{\printchaptername}{} % Спецификация слова "Глава"
	\renewcommand{\printchapternum}{} % Спецификация номера главы
	\renewcommand{\afterchapternum}{} % Пробел между номером главы и текстом
	\renewcommand{\printchaptertitle}[1]{ % Спецификация названия главы
	\centering \itshape\Huge{##1}}
	\renewcommand{\afterchaptertitle}{
		\vskip0.5\onelineskip        %Отступ после названия главы
	}}
\chapterstyle{RoboChapter} % Используем новый стиль


% ------- Еще немного настроек -------

\setlength{\parindent}{0pt} % No paragraph indentation!
\midsloppy % Перенос строк, что-то между \fussy и \sloppy
\checkandfixthelayout % just do it, memoir
\renewcommand{\familydefault}{far} % Шрифт (tex\latex\pscyr\pscyr.sty)   % Подключаем чудо-шрифты из pscyr